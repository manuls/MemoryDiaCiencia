
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Memory: Mujeres en la Ciencia üî¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #7C3AED;
            --primary-light: #A78BFA;
            --secondary: #EC4899;
            --accent: #06B6D4;
            --success: #10B981;
            --warning: #F59E0B;
            --bg-gradient-1: #FDF4FF;
            --bg-gradient-2: #EDE9FE;
            --bg-gradient-3: #DBEAFE;
            --card-back: linear-gradient(135deg, #7C3AED 0%, #EC4899 50%, #06B6D4 100%);
            --text-dark: #1E1B4B;
            --text-light: #6B7280;
            --shadow-soft: 0 4px 20px rgba(124, 58, 237, 0.15);
            --shadow-card: 0 8px 32px rgba(124, 58, 237, 0.2);
            --radius: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 50%, var(--bg-gradient-3) 100%);
            min-height: 100vh;
            color: var(--text-dark);
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            right: -30%;
            width: 80%;
            height: 80%;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.08) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        body::after {
            content: '';
            position: fixed;
            bottom: -30%;
            left: -20%;
            width: 60%;
            height: 60%;
            background: radial-gradient(circle, rgba(6, 182, 212, 0.08) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 16px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            animation: fadeInDown 0.6s ease-out;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            font-family: 'Fredoka', sans-serif;
            font-size: clamp(1.5rem, 5vw, 2.2rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .subtitle {
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 16px;
            flex-wrap: wrap;
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 6px;
            background: white;
            padding: 8px 16px;
            border-radius: 50px;
            box-shadow: var(--shadow-soft);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .stat-icon {
            font-size: 1.1rem;
        }

        .stat-value {
            font-family: 'Fredoka', sans-serif;
            font-size: 1.1rem;
            color: var(--primary);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 700px;
            margin: 0 auto 20px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 24px;
            box-shadow: var(--shadow-soft);
            backdrop-filter: blur(10px);
            animation: scaleIn 0.5s ease-out 0.3s both;
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @media (max-width: 600px) {
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                gap: 6px;
                padding: 10px;
            }
        }

        @media (max-width: 400px) {
            .game-board {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .card {
            aspect-ratio: 3/4;
            perspective: 1000px;
            cursor: pointer;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card.matched .card-inner {
            animation: matchPulse 0.5s ease-out;
        }

        @keyframes matchPulse {
            0%, 100% { transform: rotateY(180deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.05); }
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-card);
        }

        .card-back {
            background: var(--card-back);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
        }

        .card-back::before {
            content: 'üî¨';
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .card-front {
            background: white;
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            border: 3px solid var(--primary-light);
        }

        .card-image {
            flex: 1;
            background-size: cover;
            background-position: center top;
            background-color: #f0f0f0;
        }

        .card-name {
            padding: 4px 2px;
            font-family: 'Fredoka', sans-serif;
            font-size: clamp(0.5rem, 1.8vw, 0.7rem);
            font-weight: 600;
            text-align: center;
            color: var(--text-dark);
            background: white;
            line-height: 1.2;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card.matched .card-front {
            border-color: var(--success);
        }

        .card.matched .card-name {
            color: var(--success);
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            animation: fadeIn 0.6s ease-out 0.4s both;
        }

        .btn {
            font-family: 'Fredoka', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow-soft);
            touch-action: manipulation;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .btn-primary:hover, .btn-primary:active {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(124, 58, 237, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary-light);
        }

        .btn-secondary:hover, .btn-secondary:active {
            background: var(--bg-gradient-1);
            transform: translateY(-2px);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(30, 27, 75, 0.7);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: 24px;
            max-width: 500px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(124, 58, 237, 0.3);
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            position: relative;
            padding: 24px 24px 16px;
            text-align: center;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 36px;
            height: 36px;
            border: none;
            background: var(--bg-gradient-1);
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--text-light);
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--secondary);
            color: white;
        }

        .modal-image {
            width: 140px;
            height: 180px;
            border-radius: 16px;
            margin: 0 auto 16px;
            background-size: cover;
            background-position: center top;
            border: 4px solid var(--primary-light);
            box-shadow: var(--shadow-card);
        }

        .modal-title {
            font-family: 'Fredoka', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .modal-dates {
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .modal-body {
            padding: 0 24px 24px;
        }

        .modal-field {
            font-weight: 700;
            color: var(--secondary);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .modal-bio {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--text-dark);
            margin-bottom: 16px;
        }

        .modal-achievement {
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
            padding: 16px;
            border-radius: var(--radius);
            border-left: 4px solid var(--accent);
        }

        .modal-achievement-title {
            font-family: 'Fredoka', sans-serif;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .modal-achievement-text {
            font-size: 0.95rem;
            color: var(--text-dark);
        }

        /* Victory Modal */
        .victory-content {
            text-align: center;
            padding: 40px 24px;
        }

        .victory-icon {
            font-size: 4rem;
            margin-bottom: 16px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .victory-title {
            font-family: 'Fredoka', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .victory-subtitle {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 24px;
        }

        .victory-stats {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-bottom: 24px;
        }

        .victory-stat {
            text-align: center;
        }

        .victory-stat-value {
            font-family: 'Fredoka', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .victory-stat-label {
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .victory-message {
            font-size: 1rem;
            color: var(--text-dark);
            margin-bottom: 24px;
            padding: 16px;
            background: var(--bg-gradient-1);
            border-radius: var(--radius);
        }

        footer {
            text-align: center;
            padding: 16px;
            color: var(--text-light);
            font-size: 0.8rem;
        }

        footer strong {
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üß¨ Mujeres en la Ciencia</h1>
            <p class="subtitle">11 de febrero ¬∑ D√≠a Internacional de la Mujer y la Ni√±a en la Ciencia</p>
        </header>

        <div class="stats-bar">
            <div class="stat">
                <span class="stat-icon">üéØ</span>
                <span>Movimientos:</span>
                <span class="stat-value" id="moves">0</span>
            </div>
            <div class="stat">
                <span class="stat-icon">üèÜ</span>
                <span>Parejas:</span>
                <span class="stat-value"><span id="matches">0</span>/8</span>
            </div>
        </div>

        <div class="game-board" id="gameBoard"></div>

        <div class="buttons">
            <button class="btn btn-primary" id="resetBtn">
                üîÑ Reiniciar
            </button>
            <button class="btn btn-secondary" id="infoBtn">
                ‚ÑπÔ∏è C√≥mo jugar
            </button>
        </div>
    </div>

    <!-- Scientist Info Modal -->
    <div class="modal-overlay" id="scientistModal">
        <div class="modal">
            <div class="modal-header">
                <button class="modal-close" id="closeScientist">‚úï</button>
                <div class="modal-image" id="modalImage"></div>
                <h2 class="modal-title" id="modalName"></h2>
                <p class="modal-dates" id="modalDates"></p>
            </div>
            <div class="modal-body">
                <p class="modal-field">Campo de estudio</p>
                <p class="modal-bio" id="modalField"></p>
                <p class="modal-field">Biograf√≠a</p>
                <p class="modal-bio" id="modalBio"></p>
                <div class="modal-achievement">
                    <p class="modal-achievement-title">üèÖ Logro destacado</p>
                    <p class="modal-achievement-text" id="modalAchievement"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Victory Modal -->
    <div class="modal-overlay" id="victoryModal">
        <div class="modal">
            <div class="victory-content">
                <div class="victory-icon">üéâ</div>
                <h2 class="victory-title">¬°Felicidades!</h2>
                <p class="victory-subtitle">Has encontrado todas las parejas</p>
                <div class="victory-stats">
                    <div class="victory-stat">
                        <div class="victory-stat-value" id="finalMoves">0</div>
                        <div class="victory-stat-label">Movimientos</div>
                    </div>
                </div>
                <p class="victory-message">
                    üåü Has conocido a 8 mujeres incre√≠bles que cambiaron el mundo con la ciencia. 
                    ¬°T√∫ tambi√©n puedes ser una de ellas!
                </p>
                <button class="btn btn-primary" id="playAgainBtn">
                    üîÑ Jugar de nuevo
                </button>
            </div>
        </div>
    </div>

    <!-- How to Play Modal -->
    <div class="modal-overlay" id="infoModal">
        <div class="modal">
            <div class="modal-header">
                <button class="modal-close" id="closeInfo">‚úï</button>
                <h2 class="modal-title">C√≥mo jugar</h2>
            </div>
            <div class="modal-body">
                <p class="modal-bio">
                    <strong>1.</strong> Toca una carta para voltearla y descubrir a una cient√≠fica.<br><br>
                    <strong>2.</strong> Toca otra carta para buscar su pareja.<br><br>
                    <strong>3.</strong> Si las dos cartas son iguales, ¬°encontraste una pareja! Aparecer√° informaci√≥n sobre ella.<br><br>
                    <strong>4.</strong> Si no coinciden, las cartas se voltear√°n de nuevo.<br><br>
                    <strong>5.</strong> Encuentra las 8 parejas para ganar.
                </p>
                <div class="modal-achievement">
                    <p class="modal-achievement-title">üí° Consejo</p>
                    <p class="modal-achievement-text">
                        ¬°Presta atenci√≥n y usa tu memoria! Cuantos menos movimientos hagas, mejor.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Hecho por <a href="http://manuelquiroga.com">Manu Quiroga</a> con üíú para el <strong>D√≠a Internacional de la Mujer y la Ni√±a en la Ciencia</strong></p>
        <p>Fundaci√≥n Secretariado Gitano (c) 2026</p>
        <p></p>
        <p><a href="https://gitanos.org" alt="Fundaci√≥n Secretariado GItano"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLdJoPL_gKjaIKs9pFj-K1XUv6-83WNW62qg&s" width="100px" /></a></p>
    </footer>

    <script>
      const scientists = [
    {
        id: 1,
        name: "Ada Lovelace",
        dates: "1815 - 1852",
        field: "Matem√°ticas e Inform√°tica",
        bio: "Matem√°tica brit√°nica, considerada la primera programadora de la historia. Hija del poeta Lord Byron, trabaj√≥ con Charles Babbage en la M√°quina Anal√≠tica y vio su potencial m√°s all√° del c√°lculo num√©rico.",
        achievement: "Escribi√≥ el primer algoritmo dise√±ado para ser procesado por una m√°quina, anticipando la era de los ordenadores m√°s de un siglo antes de que existieran.",
        image: "images/Ada_Lovelace.png"
    },
    {
        id: 2,
        name: "Rosalind Franklin",
        dates: "1920 - 1958",
        field: "Qu√≠mica y Cristalograf√≠a",
        bio: "Qu√≠mica brit√°nica cuyo trabajo fue fundamental para comprender la estructura del ADN. Experta en cristalograf√≠a de rayos X, su trabajo fue esencial pero no reconocido en vida.",
        achievement: "Su famosa 'Fotograf√≠a 51' fue clave para descubrir la estructura de doble h√©lice del ADN, uno de los descubrimientos m√°s importantes del siglo XX.",
        image: "images/Rosalind.png"
    },
    {
        id: 3,
        name: "Hedy Lamarr",
        dates: "1914 - 2000",
        field: "Ingenier√≠a e Invenci√≥n",
        bio: "Actriz e inventora austr√≠aca-estadounidense. Adem√°s de su carrera en Hollywood, fue una brillante inventora autodidacta que desarroll√≥ tecnolog√≠a militar durante la Segunda Guerra Mundial.",
        achievement: "Co-invent√≥ el 'salto de frecuencia', tecnolog√≠a base del WiFi, Bluetooth y GPS que usamos hoy en d√≠a. Fue reconocida con el Premio Pioneer de la Electronic Frontier Foundation.",
        image: "images/HedyLamar.png"
    },
    {
        id: 4,
        name: "Jane Goodall",
        dates: "1934 - 2025",
        field: "Primatolog√≠a y Conservaci√≥n",
        bio: "Primat√≥loga brit√°nica, la mayor experta mundial en chimpanc√©s. Ha dedicado m√°s de 60 a√±os al estudio y conservaci√≥n de estos animales en Tanzania, revolucionando nuestra comprensi√≥n de los primates.",
        achievement: "Descubri√≥ que los chimpanc√©s fabrican y usan herramientas, cambiando para siempre nuestra comprensi√≥n de lo que nos diferencia como humanos.",
        image: "images/JaneGodall.png"
    },
    {
        id: 5,
        name: "Katherine Johnson",
        dates: "1918 - 2020",
        field: "Matem√°ticas y Aeron√°utica",
        bio: "Matem√°tica afroamericana que trabaj√≥ en la NASA superando barreras raciales y de g√©nero. Sus c√°lculos fueron esenciales para las primeras misiones espaciales de Estados Unidos.",
        achievement: "Calcul√≥ las trayectorias de misiones espaciales clave y ayud√≥ a que misiones hist√≥ricas como el programa Mercury y el Apollo 11 llegaran a buen puerto.",
        image: "images/KatherineJohnson.png"
    },
    {
        id: 6,
        name: "Margarita Salas",
        dates: "1938 - 2019",
        field: "Bioqu√≠mica y Biolog√≠a Molecular",
        bio: "Cient√≠fica espa√±ola, pionera de la biolog√≠a molecular en Espa√±a. Disc√≠pula de Severo Ochoa, dedic√≥ su vida a la investigaci√≥n del ADN y form√≥ a generaciones de cient√≠ficos espa√±oles.",
        achievement: "Descubri√≥ la ADN polimerasa del virus phi29, usada mundialmente para amplificar ADN en diagn√≥sticos m√©dicos, tests de paternidad y an√°lisis forenses.",
        image: "images/Margarita_Salas.png"
    },
    {
        id: 7,
        name: "Elena Garc√≠a Armada",
        dates: "1971 - presente",
        field: "Ingenier√≠a Rob√≥tica",
        bio: "Ingeniera espa√±ola del CSIC, pionera mundial en rob√≥tica de rehabilitaci√≥n. Cre√≥ el primer exoesqueleto pedi√°trico del mundo para ni√±os con enfermedades neuromusculares.",
        achievement: "Invent√≥ el primer exoesqueleto bi√≥nico pedi√°trico que ayuda a ni√±os con problemas musculares a caminar y rehabilitarse.",
        image: "images/ElenaGarcia.png"
    },
    {
        id: 8,
        name: "Felisa Mart√≠n Bravo",
        dates: "1898 - 1979",
        field: "F√≠sica y Meteorolog√≠a",
        bio: "F√≠sica espa√±ola, una de las primeras mujeres en doctorarse en F√≠sica en Espa√±a. Pionera en el estudio de la radiaci√≥n solar y la meteorolog√≠a, abriendo camino a las mujeres en la ciencia espa√±ola.",
        achievement: "Fue una de las primeras mujeres cient√≠ficas en trabajar en el Servicio Meteorol√≥gico Nacional, donde desarroll√≥ investigaciones sobre radiaci√≥n solar.",
        image: "images/FelisaReyes.png"
    }
];


        // Game state
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;
        let isLocked = false;

        // DOM elements
        const gameBoard = document.getElementById('gameBoard');
        const movesDisplay = document.getElementById('moves');
        const matchesDisplay = document.getElementById('matches');
        const resetBtn = document.getElementById('resetBtn');
        const infoBtn = document.getElementById('infoBtn');
        const scientistModal = document.getElementById('scientistModal');
        const victoryModal = document.getElementById('victoryModal');
        const infoModal = document.getElementById('infoModal');
        const closeScientist = document.getElementById('closeScientist');
        const closeInfo = document.getElementById('closeInfo');
        const playAgainBtn = document.getElementById('playAgainBtn');

        function initGame() {
            cards = [];
            flippedCards = [];
            matchedPairs = 0;
            moves = 0;
            isLocked = false;

            movesDisplay.textContent = '0';
            matchesDisplay.textContent = '0';

            const cardPairs = [...scientists, ...scientists];
            
            // Shuffle
            for (let i = cardPairs.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cardPairs[i], cardPairs[j]] = [cardPairs[j], cardPairs[i]];
            }

            gameBoard.innerHTML = '';

            cardPairs.forEach((scientist, index) => {
                const card = createCard(scientist, index);
                gameBoard.appendChild(card);
                cards.push({ element: card, scientist, matched: false });
            });
        }

        function createCard(scientist, index) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.index = index;

            card.innerHTML = `
                <div class="card-inner">
                    <div class="card-face card-back"></div>
                    <div class="card-face card-front">
                        <div class="card-image" style="background-image: url('${scientist.image}')"></div>
                        <div class="card-name">${scientist.name}</div>
                    </div>
                </div>
            `;

            return card;
        }

        function flipCard(index) {
            if (isLocked) return;
            
            const cardData = cards[index];
            
            if (cardData.matched || cardData.element.classList.contains('flipped')) return;

            cardData.element.classList.add('flipped');
            flippedCards.push(index);

            if (flippedCards.length === 2) {
                moves++;
                movesDisplay.textContent = moves;
                checkMatch();
            }
        }

        function checkMatch() {
            isLocked = true;
            
            const [index1, index2] = flippedCards;
            const card1 = cards[index1];
            const card2 = cards[index2];

            if (card1.scientist.id === card2.scientist.id) {
                card1.matched = true;
                card2.matched = true;
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                matchedPairs++;
                matchesDisplay.textContent = matchedPairs;

                setTimeout(() => {
                    showScientistInfo(card1.scientist, matchedPairs === scientists.length);
                    flippedCards = [];
                    isLocked = false;
                }, 600);
            } else {
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    flippedCards = [];
                    isLocked = false;
                }, 1000);
            }
        }

        let isLastMatch = false;

        function showScientistInfo(scientist, isLast = false) {
            isLastMatch = isLast;
            document.getElementById('modalImage').style.backgroundImage = `url('${scientist.image}')`;
            document.getElementById('modalName').textContent = scientist.name;
            document.getElementById('modalDates').textContent = scientist.dates;
            document.getElementById('modalField').textContent = scientist.field;
            document.getElementById('modalBio').textContent = scientist.bio;
            document.getElementById('modalAchievement').textContent = scientist.achievement;

            scientistModal.classList.add('active');
        }

        function showVictory() {
            document.getElementById('finalMoves').textContent = moves;
            victoryModal.classList.add('active');
        }

        function closeModal(modal) {
            modal.classList.remove('active');
            
            // Si cerramos el modal de cient√≠fica y era la √∫ltima pareja, mostrar victoria
            if (modal === scientistModal && isLastMatch) {
                isLastMatch = false;
                setTimeout(showVictory, 300);
            }
        }

        // Event listeners
        resetBtn.addEventListener('click', () => {
            closeModal(victoryModal);
            initGame();
        });

        infoBtn.addEventListener('click', () => {
            infoModal.classList.add('active');
        });

        closeScientist.addEventListener('click', () => closeModal(scientistModal));
        closeInfo.addEventListener('click', () => closeModal(infoModal));
        playAgainBtn.addEventListener('click', () => {
            closeModal(victoryModal);
            initGame();
        });

        [scientistModal, victoryModal, infoModal].forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal(modal);
            });
        });

        // Mejor soporte t√°ctil para Chrome/Windows
        function handleInteraction(e) {
            e.preventDefault();
            const card = e.target.closest('.card');
            if (card && card.dataset.index !== undefined) {
                flipCard(parseInt(card.dataset.index));
            }
        }

        // Eventos t√°ctiles
        gameBoard.addEventListener('touchstart', handleInteraction, { passive: false });
        
        // Tambi√©n click para rat√≥n
        gameBoard.addEventListener('click', (e) => {
            const card = e.target.closest('.card');
            if (card && card.dataset.index !== undefined) {
                flipCard(parseInt(card.dataset.index));
            }
        });

        // Prevenir zoom en doble tap
        document.addEventListener('touchstart', (e) => {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        let lastTouchEnd = 0;
        document.addEventListener('touchend', (e) => {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, { passive: false });

        initGame();
    </script>
</body>
</html>
